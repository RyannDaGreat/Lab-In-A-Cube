{"ast":null,"code":"import _slicedToArray from \"/Users/Ryan/Desktop/CleanCode/SBU/LabInACube/Lab-In-A-Cube/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/Ryan/Desktop/CleanCode/SBU/LabInACube/Lab-In-A-Cube/src/index.js\";\nimport AddIcon from '@material-ui/icons/Add';\nimport Button from '@material-ui/core/Button';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Fab from '@material-ui/core/Fab';\nimport IconButton from '@material-ui/core/IconButton';\nimport NavigationIcon from '@material-ui/icons/Navigation';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Split from 'react-split';\nimport { useState } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport Select from 'react-select';\nimport Switch from '@material-ui/core/Switch';\n\nfunction Multiplexer({\n  schema\n}) {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        selectedOption = _useState2[0],\n        setSelectedOption = _useState2[1];\n\n  if (!schema) return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  });\n  const options = Object.keys(schema).map(key => ({\n    value: key,\n    label: key\n  }));\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }, React.createElement(Select, {\n    value: {\n      label: selectedOption\n    },\n    onChange: x => setSelectedOption(x.value),\n    options: options,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }), React.createElement(Schema, {\n    schema: schema[selectedOption],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }));\n}\n\nfunction StringInput({\n  schema\n}) {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, schema);\n}\n\nfunction isLeaf(schema) {\n  if (typeof schema !== 'object') return 'type';\n\n  for (const _ref of Object.entries(schema)) {\n    var _ref2 = _slicedToArray(_ref, 2);\n\n    const index = _ref2[0];\n    const value = _ref2[1];\n\n    if (typeof value === 'string') {\n      console.assert('type' in schema);\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction addItemDialogs() {\n  function itemDialog() {\n    const value = prompt(\"Enter the new item name:\");\n    if (!value) return alert('Canceled adding item');else if (value in window.config.items) {\n      alert('Sorry, that names already taken! Try another one...');\n      return itemDialog();\n    }\n    return value;\n  }\n\n  function typeDialog() {\n    const value = prompt(\"Enter the new item type! Please choose from: \" + Object.keys(window.getItemSchemas()));\n    if (!value) return alert('Canceled adding item');else if (!(value in window.getItemSchemas())) {\n      alert('Sorry, thats not a module type! Please choose from: ' + Object.keys(window.getItemSchemas()));\n      return typeDialog();\n    }\n    return value;\n  }\n\n  const name = itemDialog();\n  if (!name) return;\n  const type = typeDialog();\n  if (!type) return;\n  alert(\"Success! Added item. Please refresh the page to see changes.\");\n  window.addLinesToConfigString('items\t' + name + ' ' + type);\n}\n\nfunction addDeltaDialog() {\n  function deltaDialog() {\n    const value = prompt(\"Enter the new delta name:\");\n    if (!value) return alert('Canceled adding delta');else if (value in window.config.deltas) {\n      alert('Sorry, that names already taken! Try another one...');\n      return deltaDialog();\n    }\n    return value;\n  }\n\n  const d = deltaDialog();\n  if (!d) return;\n  alert(\"Success! Added delta. Please refresh the page to see changes.\");\n  window.addLinesToConfigString('deltas\t' + d);\n}\n\nfunction Schema({\n  schema\n}) {\n  if (!schema) return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  });\n\n  if (isLeaf(schema)) {\n    return React.createElement(LeafModifier, {\n      schema: schema,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    });\n  } else {\n    return React.createElement(Multiplexer, {\n      schema: schema,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    });\n  }\n}\n\nfunction LeafModifier({\n  schema\n}) {\n  const _useState3 = useState(schema.config === undefined),\n        _useState4 = _slicedToArray(_useState3, 2),\n        used = _useState4[0],\n        setUsed = _useState4[1]; //Set this to true IFF we're using the value in the current delta\n\n\n  let onClick = function () {\n    const value = prompt(\"Enter the new value:\");\n    if (value == null) return; //Canceled\n    else {\n        schema.set(value);\n      }\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(Switch, {\n    checked: used,\n    onChange: setUsed(true),\n    value: \"checkedB\",\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }), React.createElement(Button, {\n    variant: \"contained\",\n    onClick: onClick,\n    size: \"small\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, 'State: ' + schema.state + '\\tConfig: ' + schema.config\n  /*schema.path+''*/\n  ));\n}\n\nlet oldStuff = undefined;\nsetInterval(window.tryRefreshInstance, 100);\n\nfunction tryRefreshInstance() {\n  if (window.refreshInstance) window.refreshInstance();\n}\n\nwindow.refreshInstance = undefined;\n\nfunction GetSimpleGui() {\n  const labels = [];\n\n  let _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      instance = _useState6[0],\n      setInstance = _useState6[1];\n\n  window.refreshInstance = () => setInstance(window.getGuiArchitectureInstance());\n\n  timerEvents[0] = () => {\n    let stuff = window.gameWindow.getGuiArchitectureInstance.apply(window.gameWindow, [window.gameWindow.config]);\n\n    if (stuff !== oldStuff) {\n      setInstance(stuff);\n      oldStuff = stuff;\n    }\n  }; //This function is inefficient. It must be cleaned up asap. (it lists all possible controls...which is just STUPID (but also very easy to make))\n\n\n  for (const _ref3 of Object.entries(instance)) {\n    var _ref4 = _slicedToArray(_ref3, 2);\n\n    const index = _ref4[0];\n    const i = _ref4[1];\n\n    if (i.path.includes('color')) {\n      let onClick = function () {\n        const value = prompt(\"Enter the new value for \" + i.path.join(' ') + '\\n\\n at delta ' + i.delta + '\\n\\nCurrent Value: ' + i.valueInConfig);\n        if (value == null) return; //Canceled\n        else {\n            let configString = localStorage.getItem('config');\n            configString += '\\n' + 'deltas\t' + i.delta + '\t' + i.path.join('\t') + ' ' + value;\n            window.gameWindow.setConfigDjsonInLocalStorage(configString);\n          }\n      };\n\n      let color = i.valueInConfig === undefined ? \"primary\" : \"secondary\";\n      labels.push(React.createElement(Button, {\n        key: index,\n        variant: \"contained\",\n        onClick: onClick,\n        size: \"small\",\n        color: color,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, 'deltas ' + i.delta + ' ' + i.path.join(' ')));\n    }\n  }\n\n  return React.createElement(\"table\", {\n    style: {\n      flexGrow: 4,\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, labels);\n}\n\nwindow.gameWindow = undefined; //Will be set to the 'window' element of the 'game.html' iframe\n\nconst timerEvents = [() => {}]; //Calls each one of these on a timer\n\nfunction doTimerEvents() {\n  if (window.gameWindow !== undefined) //We're not ready yet: the game iframe has to finish loading first\n    {\n      console.log(\"HO\");\n      window.gameWindow.editorMode = true;\n\n      for (const event of timerEvents) event();\n    }\n}\n\nsetInterval(doTimerEvents, 100);\n\nfunction App() {\n  function setGameWindow(x) {\n    window.gameWindow = x.contentWindow;\n  }\n\n  const _useState7 = useState(window.getDeltasGuiSchema()),\n        _useState8 = _slicedToArray(_useState7, 2),\n        schema = _useState8[0],\n        setSchema = _useState8[1];\n\n  window.refreshGuiSchema = () => setSchema(window.getDeltasGuiSchema());\n\n  let gameStyle = {\n    width: '100%',\n    height: '100%',\n    border: '0' // noinspection HtmlUnknownTarget\n\n  };\n  return React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'horizontal',\n      width: '25%',\n      height: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      border: 10,\n      backgroundColor: 'rgba(255,255,255,.1)',\n      flexGrow: 4,\n      display: 'flex',\n      flexDirection: 'column',\n      overflowY: 'scroll',\n      pointerEvents: 'auto'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    style: {\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  }, \"Config\"), React.createElement(Button, {\n    style: {\n      pointerEvents: 'auto'\n    },\n    onClick: window.undoEditorChange,\n    variant: \"contained\",\n    size: \"small\",\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  }, \" Undo \"), React.createElement(Button, {\n    variant: \"contained\",\n    size: \"small\",\n    color: \"primary\",\n    onClick: addItemDialogs,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }, \" Add Item \"), React.createElement(Button, {\n    variant: \"contained\",\n    size: \"small\",\n    color: \"primary\",\n    onClick: addDeltaDialog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235\n    },\n    __self: this\n  }, \" Add Delta \"), React.createElement(Schema, {\n    schema: schema,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236\n    },\n    __self: this\n  }), React.createElement(GetSimpleGui, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  })));\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", function (event) {\n  ReactDOM.render(React.createElement(App, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243\n    },\n    __self: this\n  }), document.getElementById('root')); // Your code to run since DOM is loaded and ready\n});","map":{"version":3,"sources":["/Users/Ryan/Desktop/CleanCode/SBU/LabInACube/Lab-In-A-Cube/src/index.js"],"names":["AddIcon","Button","DeleteIcon","Fab","IconButton","NavigationIcon","PropTypes","React","ReactDOM","Split","useState","withStyles","Select","Switch","Multiplexer","schema","selectedOption","setSelectedOption","options","Object","keys","map","key","value","label","x","StringInput","isLeaf","entries","index","console","assert","addItemDialogs","itemDialog","prompt","alert","window","config","items","typeDialog","getItemSchemas","name","type","addLinesToConfigString","addDeltaDialog","deltaDialog","deltas","d","Schema","LeafModifier","undefined","used","setUsed","onClick","set","state","oldStuff","setInterval","tryRefreshInstance","refreshInstance","GetSimpleGui","labels","instance","setInstance","getGuiArchitectureInstance","timerEvents","stuff","gameWindow","apply","i","path","includes","join","delta","valueInConfig","configString","localStorage","getItem","setConfigDjsonInLocalStorage","color","push","flexGrow","display","flexDirection","doTimerEvents","log","editorMode","event","App","setGameWindow","contentWindow","getDeltasGuiSchema","setSchema","refreshGuiSchema","gameStyle","width","height","border","backgroundColor","overflowY","pointerEvents","undoEditorChange","document","addEventListener","render","getElementById"],"mappings":"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","sourcesContent":["import AddIcon from '@material-ui/icons/Add'\nimport Button from '@material-ui/core/Button'\nimport DeleteIcon from '@material-ui/icons/Delete'\nimport Fab from '@material-ui/core/Fab'\nimport IconButton from '@material-ui/core/IconButton'\nimport NavigationIcon from '@material-ui/icons/Navigation'\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport Split from 'react-split'\nimport {useState} from 'react'\nimport {withStyles} from '@material-ui/core/styles'\nimport Select from 'react-select'\nimport Switch from '@material-ui/core/Switch';\n\n\nfunction Multiplexer({schema})\n{\n\tconst [selectedOption, setSelectedOption]=useState(null)\n\tif(!schema)\n\t\treturn <div></div>\n\tconst options                            =Object.keys(schema).map(key=>({value: key, label: key}))\n\n\treturn <div>\n\t\t<Select value={{label: selectedOption}}\n\t\t\t\tonChange={x=>setSelectedOption(x.value)}\n\t\t\t\toptions={options}\n\t\t/>\n\t\t<Schema schema={schema[selectedOption]}/>\n\t</div>\n}\n\nfunction StringInput({schema})\n{\n\treturn <div>{schema}</div>\n}\n\nfunction isLeaf(schema)\n{\n\tif(typeof schema!=='object')\n\t\treturn 'type'\n\tfor(const [index,value] of Object.entries(schema))\n\t{\n\t\tif(typeof value==='string')\n\t\t{\n\t\t\tconsole.assert('type' in schema)\n\t\t\treturn true\n\t\t}\n\t}\n\treturn false\n}\n\nfunction addItemDialogs()\n{\n\tfunction itemDialog()\n\t{\n\t\tconst value=prompt(\"Enter the new item name:\")\n\t\tif(!value)\n\t\t\treturn alert('Canceled adding item')\n\t\telse if(value in window.config.items)\n\t\t{\n\t\t\talert('Sorry, that names already taken! Try another one...')\n\t\t\treturn itemDialog()\n\t\t}\n\t\treturn value\n\t}\n\tfunction typeDialog()\n\t{\n\t\tconst value=prompt(\"Enter the new item type! Please choose from: \"+Object.keys(window.getItemSchemas()))\n\t\tif(!value)\n\t\t\treturn alert('Canceled adding item')\n\t\telse if(!(value in (window.getItemSchemas())))\n\t\t{\n\t\t\talert('Sorry, thats not a module type! Please choose from: '+Object.keys((window.getItemSchemas())))\n\t\t\treturn typeDialog()\n\t\t}\n\t\treturn value\n\t}\n\tconst name=itemDialog()\n\tif(!name)\n\t\treturn\n\tconst type=typeDialog()\n\tif(!type)\n\t\treturn\n\talert(\"Success! Added item. Please refresh the page to see changes.\")\n\t\twindow.addLinesToConfigString('items\t'+name+' '+type)\n}\n\nfunction addDeltaDialog()\n{\n\tfunction deltaDialog()\n\t{\n\t\tconst value=prompt(\"Enter the new delta name:\")\n\t\tif(!value)\n\t\t\treturn alert('Canceled adding delta')\n\t\telse if(value in window.config.deltas)\n\t\t{\n\t\t\talert('Sorry, that names already taken! Try another one...')\n\t\t\treturn deltaDialog()\n\t\t}\n\t\treturn value\n\t}\n\tconst d=deltaDialog()\n\tif(!d)return\n\talert(\"Success! Added delta. Please refresh the page to see changes.\")\n\twindow.addLinesToConfigString('deltas\t'+d)\n}\n\nfunction Schema({schema})\n{\n\tif(!schema)\n\t\treturn <div></div>\n\tif(isLeaf(schema))\n\t{\n\t\treturn <LeafModifier schema={schema}/>\n\t}\n\telse\n\t{\n\t\treturn <Multiplexer schema={schema}/>\n\t}\n}\n\n\nfunction LeafModifier({schema})\n{\n\tconst [used,setUsed]=useState(schema.config===undefined)//Set this to true IFF we're using the value in the current delta\n\tlet onClick=function()\n\t{\n\t\tconst value=prompt(\"Enter the new value:\")\n\t\tif(value==null)\n\t\t\treturn//Canceled\n\t\telse\n\t\t{\n\t\t\tschema.set(value)\n\t\t}\n\t}\n\treturn <div>\n\t<Switch\n\t\tchecked={used}\n\t\tonChange={setUsed(true)}\n\t\tvalue=\"checkedB\"\n\t\tcolor=\"primary\"\n\t\t/>\n\t<Button\n\t\t\tvariant=\"contained\" onClick={onClick}\n\t\t\tsize=\"small\"\n\t\t\t\t   >{'State: '+schema.state+'\\tConfig: '+schema.config/*schema.path+''*/}</Button>\n\t\t\t\t   </div>\n}\n\nlet oldStuff=undefined\nsetInterval(window.tryRefreshInstance,100)\nfunction tryRefreshInstance()\n{\n\tif(window.refreshInstance)\n\t\twindow.refreshInstance()\n}\nwindow.refreshInstance=undefined\nfunction GetSimpleGui()\n{\n\tconst labels               =[]\n\tlet [instance, setInstance]=useState({})\n\twindow.refreshInstance=()=>setInstance(window.getGuiArchitectureInstance())\n\ttimerEvents[0]             =()=>\n\t{\n\t\tlet stuff=window.gameWindow.getGuiArchitectureInstance.apply(window.gameWindow, [window.gameWindow.config])\n\t\tif(stuff!==oldStuff)\n\t\t{\n\t\t\tsetInstance(stuff)\n\t\t\toldStuff=stuff\n\t\t}\n\t}//This function is inefficient. It must be cleaned up asap. (it lists all possible controls...which is just STUPID (but also very easy to make))\n\n\tfor(const [index, i] of Object.entries(instance))\n\t{\n\t\tif(i.path.includes('color'))\n\t\t{\n\t\t\tlet onClick=function()\n\t\t\t{\n\t\t\t\tconst value=prompt(\"Enter the new value for \"+(i.path.join(' '))+\n\t\t\t\t\t\t\t\t\t   '\\n\\n at delta '+(i.delta)+'\\n\\nCurrent Value: '+i.valueInConfig)\n\t\t\t\tif(value==null)\n\t\t\t\t\treturn//Canceled\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet configString=localStorage.getItem('config')\n\t\t\t\t\tconfigString+='\\n'+'deltas\t'+i.delta+'\t'+i.path.join('\t')+' '+value\n\t\t\t\t\twindow.gameWindow.setConfigDjsonInLocalStorage(configString)\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet color  =i.valueInConfig===undefined ? \"primary\" : \"secondary\"\n\t\t\tlabels.push(<Button key={index}\n\t\t\t\t\t\t\t\tvariant=\"contained\" onClick={onClick}\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tcolor={color}>\n\t\t\t\t{'deltas '+i.delta+' '+i.path.join(' ')}\n\t\t\t</Button>)\n\t\t}\n\t}\n\treturn <table style={{flexGrow: 4, display: 'flex', flexDirection: 'column'}}>\n\t\t{labels}\n\t</table>\n}\n\nwindow.gameWindow=undefined//Will be set to the 'window' element of the 'game.html' iframe\nconst timerEvents=[()=>{}]//Calls each one of these on a timer\nfunction doTimerEvents()\n{\n\tif(window.gameWindow!==undefined)//We're not ready yet: the game iframe has to finish loading first\n\t{\n\t\tconsole.log(\"HO\")\n\t\twindow.gameWindow.editorMode=true\n\t\tfor(const event of timerEvents)\n\t\t\tevent()\n\t}\n}\nsetInterval(doTimerEvents, 100)\n\nfunction App()\n{\n\tfunction setGameWindow(x)\n\t{\n\t\twindow.gameWindow=x.contentWindow\n\t}\n\tconst [schema,setSchema]=useState(window.getDeltasGuiSchema())\n\twindow.refreshGuiSchema=()=>setSchema(window.getDeltasGuiSchema())\n\tlet gameStyle={width: '100%', height: '100%', border: '0'}\n\t// noinspection HtmlUnknownTarget\n\treturn <div style={{display: 'flex', flexDirection: 'horizontal', width: '25%', height: '100%'}}>\n\t\t<div style={{border: 10, backgroundColor: 'rgba(255,255,255,.1)', flexGrow: 4, display: 'flex', flexDirection: 'column', overflowY: 'scroll', pointerEvents: 'auto'}}>\n\t\t\t<h1 style={{color: 'white'}}>Config</h1>\n\t\t\t<Button style={{pointerEvents: 'auto'}} onClick={window.undoEditorChange}variant=\"contained\" size=\"small\" color=\"primary\"> Undo </Button>\n\t\t\t{/*<Button variant=\"contained\" size=\"small\" color=\"primary\"> Redo </Button>*/}\n\t\t\t<Button variant=\"contained\" size=\"small\" color=\"primary\" onClick={addItemDialogs}> Add Item </Button>\n\t\t\t<Button variant=\"contained\" size=\"small\" color=\"primary\" onClick={addDeltaDialog}> Add Delta </Button>\n\t\t\t<Schema schema={schema}></Schema>\n\t\t\t<GetSimpleGui/>\n\t\t</div>\n\t</div>\n}\ndocument.addEventListener(\"DOMContentLoaded\", function(event)\n{\n\tReactDOM.render(<App/>, document.getElementById('root'))\n\t// Your code to run since DOM is loaded and ready\n})\n"]},"metadata":{},"sourceType":"module"}